# Yisu Hotel 移动端酒店列表页面前端流程文档

本文档描述了移动端酒店列表页面的业务逻辑流程、页面交互以及与后端的交互细节。

---

## 1. 页面初始化与数据加载

当用户从首页搜索入口、滚动广告栏或快速跳转标签进入此页面时，页面将根据携带的参数进行初始化。

### 1.1 参数继承与请求
- **参数继承**: 页面加载时，自动从 URL 或全局状态中继承以下参数：
    - `location`: 城市名称。
    - `check_in_date` / `check_out_date`: 入住与离店日期。
    - `keyword`: 搜索关键词（如有）。
    - `star_rating`, `max_min_price`, `rating`, `facilities`, `services`, `tags`, `nearby_info`: 各项筛选条件（如有）。
- **接口调用**: 使用上述继承的所有参数调用 [Hotel_API: 2.1 获取酒店列表](file:///d:/Yisu/Yisu-Hotel-backend/docs/mobile/Hotel_API.md#L23)。
- **展示逻辑**: 
    - 列表展示接口返回的酒店数据（包含酒店名、评分、平均价格、标签、主图等）。
    - 列表支持分页加载（上拉加载更多）。

---

## 2. 页面顶部交互区域 (Header Controls)

页面顶部采用压缩后的筛选与搜索工具栏，方便用户在列表页快速调整条件。

### 2.1 顶部工具栏构成 (从左至右)
1. **城市切换 (`location`)**:
    - 展示当前城市名称。
    - **交互**: 点击可唤起城市选择器（同首页逻辑），切换城市后立即触发重新查询。
2. **日期选择 (`check_in_date` / `check_out_date`)**:
    - 展示当前选定的入住与离店日期区间（如 "02-14 至 02-15"）。
    - **交互**: 点击可唤起日历控件修改日期，修改后立即重新查询。
3. **搜索栏 (`keyword`)**:
    - 继承上一页的关键词，支持用户点击并重新输入。
    - **交互**: 输入内容改变并确认后，触发重新查询。
4. **高级筛选按钮**:
    - 图标形式展示。
    - **交互**: 点击展开侧边栏或弹窗，供用户调整以下深度筛选条件：
        - `star_rating` (星级)
        - `max_min_price` (最高可接受起价)
        - `rating` (评分)
        - `facilities` (设施)
        - `services` (服务)
    - **确认筛选**: 用户在筛选器中点击“确定”后，页面更新参数并重新查询。

---

## 3. 快捷筛选栏 (Quick Filter Bar)

位于顶部工具栏下方，展示动态获取的快捷标签。

### 3.1 标签展示与交互
- **数据来源**: 页面加载或城市切换后，调用 [Hotel_API: 2.3 获取城市热门标签与周边信息](file:///d:/Yisu/Yisu-Hotel-backend/docs/mobile/Hotel_API.md#L270)。
- **交互形式**: 采用水平滑动列表（Horizontal Scroll），展示 `tags` 和 `nearby_info`，用户可点击任一项目进行筛选。同时第一个tags或者nearby_info都为上一次选中的项目，用不同颜色表示。
- **点击逻辑**:
    - 点击某个标签或周边信息，将其作为单一参数（`tags` 或 `nearby_info`）加入当前请求条件。
    - 页面立即重新查询并刷新列表。

---

## 4. 酒店列表展示与跳转

### 4.1 列表项内容
- 每个酒店卡片展示核心信息：酒店中文名、英文名、星级、评分、距离（`nearby_info`）、主图、标签以及**选定日期内的最小平均价格** (`min_price`)。

### 4.2 跳转至详情
- **操作**: 点击列表中的任意酒店卡片。
- **跳转**: 跳转至 **酒店详情页面**，并传递 `hotel_id` 参数。

---

## 5. 自动刷新逻辑说明
- **联动刷新**: 只要上述任何筛选条件（城市、日期、关键词、高级筛选、快捷标签）发生变化，前端均需重置 `page` 为 1，并携带最新完整参数集重新发起 [Hotel_API: 2.1](file:///d:/Yisu/Yisu-Hotel-backend/docs/mobile/Hotel_API.md#L23) 请求。
