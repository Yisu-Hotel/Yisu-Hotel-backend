# Yisu Hotel 移动端订单详情页面前端流程文档

本文档描述了移动端订单详情页面的业务逻辑流程、页面交互以及与后端的交互细节。

---

## 1. 页面入口与初始化

本页面主要有三种进入路径：
1. **酒店详情页触发**: 用户完成酒店房型预订并创建订单后自动跳转。
2. **“我的”页面触发**: 用户在“我的”页面订单分类中点击特定订单卡片。
3. **“订单”页面触发**: 用户在全部订单快捷列表中点击特定订单卡片。

### 1.1 核心数据加载
- **参数获取**: 页面加载时从跳转参数中获取 `order_id`。
- **接口调用**: 调用 [Booking_API: 2.2 查询订单详情](file:///d:/Yisu/Yisu-Hotel-backend/docs/mobile/Booking_API.md#L107)。
- **展示内容**: 
    - **订单状态**: 实时展示订单的最新状态（待付款、已付款、已完成、已取消）。
    - **酒店信息**: 酒店名称（支持点击跳转）、地址、联系方式。
    - **预订信息**: 房型名称、入住/离店日期、入住人姓名、联系电话、特殊要求。
    - **价格明细**: 展示原价、优惠金额及最终支付的总价。
    - **订单元数据**: 订单号、下单时间、支付时间（如有）。

---

## 2. 状态驱动的交互逻辑

页面下方的操作按钮根据订单的 `status` 字段动态展示。

### 2.1 待付款状态 (`status == 'pending'`)
若订单处于待付款状态，页面底部展示以下两个按钮：

#### A. 支付订单
- **操作**: 点击“立即支付”按钮。
- **接口调用**: 调用 [Booking_API: 2.4 支付订单](file:///d:/Yisu/Yisu-Hotel-backend/docs/mobile/Booking_API.md#L286)。
- **参数**: `{ "order_id": "..." }`。
- **反馈**: 支付成功后，页面状态更新为“已付款”，并隐藏操作按钮。

#### B. 取消订单
- **操作**: 点击“取消订单”按钮。
- **二次确认**: 弹出确认弹窗，询问用户是否确定取消。
- **接口调用**: 调用 [Booking_API: 2.5 取消订单](file:///d:/Yisu/Yisu-Hotel-backend/docs/mobile/Booking_API.md#L351)。
- **参数**: `{ "order_id": "..." }`。
- **反馈**: 取消成功后，页面状态更新为“已取消”，并隐藏操作按钮。

### 2.2 其他状态
- **已付款 / 已完成 / 已取消**: 页面底部不展示支付或取消按钮。用户仅可查看订单历史信息。

---

## 3. 关联跳转逻辑

### 3.1 跳转酒店详情
- **操作**: 在订单详情中点击酒店名称。
- **逻辑**: 携带 `hotel_id` 跳转至 **酒店详情页面**。
