# 实现验证码发送接口计划

## 1. 创建短信服务工具类
在 `src/utils/` 下创建 `sms.js`，封装阿里云短信发送功能
- 使用已有的 `test-sms.js` 中的代码
- 提供发送验证码的方法

## 2. 创建验证码生成工具
在 `src/utils/` 下添加验证码生成函数
- 生成6位随机数字验证码

## 3. 创建验证码中间件
在 `src/middlewares/pc/auth.js` 中添加：
- `validateSendCode` - 验证 phone 和 type 参数

## 4. 实现控制器逻辑
在 `src/controllers/pc/auth.js` 中添加 `sendCode` 函数：
- 验证手机号格式
- 检查60秒内是否已发送过验证码
- 生成6位随机验证码
- 保存到 `verification_codes` 表
- 调用阿里云短信服务发送
- 返回响应（包含 expires_in: 60）

## 5. 添加路由
在 `src/routes/pc/auth.js` 中添加：
- `POST /auth/send-code` 路由

## 6. 测试接口
创建测试脚本验证接口功能