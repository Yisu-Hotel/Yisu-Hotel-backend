# 预订确认页和支付页API文档创建计划

## 文档结构

### 1. 基础信息
- 基础URL和认证方式
- 字符集和时区设置

### 2. 预订确认页API

#### 2.1 获取预订信息
- **接口地址:** `GET /mobile/bookings/confirm/{booking_token}`
- **描述:** 获取预订确认页所需的完整信息
- **请求参数:** booking_token
- **响应:** 酒店信息、房型信息、日期信息、价格明细等

#### 2.2 验证入住人信息
- **接口地址:** `POST /mobile/bookings/validate-guest`
- **描述:** 验证入住人信息格式
- **请求体:** name, phone
- **响应:** 验证结果

#### 2.3 提交预订订单
- **接口地址:** `POST /mobile/bookings/submit`
- **描述:** 提交预订订单并进入支付流程
- **请求体:** booking_token, guest_info, remark, agreed
- **响应:** 订单创建结果，包含支付跳转信息

### 3. 支付页API

#### 3.1 获取支付信息
- **接口地址:** `GET /mobile/payments/{booking_id}/info`
- **描述:** 获取支付页面所需信息
- **请求参数:** booking_id
- **响应:** 订单概览、支付方式、倒计时等

#### 3.2 选择支付方式
- **接口地址:** `POST /mobile/payments/{booking_id}/select-method`
- **描述:** 选择支付方式
- **请求体:** payment_method
- **响应:** 选择结果

#### 3.3 发起支付
- **接口地址:** `POST /mobile/payments/{booking_id}/create`
- **描述:** 发起支付请求
- **请求体:** payment_method
- **响应:** 支付链接或参数

#### 3.4 查询支付状态
- **接口地址:** `GET /mobile/payments/{booking_id}/status`
- **描述:** 查询支付状态
- **请求参数:** booking_id
- **响应:** 当前支付状态

#### 3.5 取消支付
- **接口地址:** `POST /mobile/payments/{booking_id}/cancel`
- **描述:** 取消支付
- **请求体:** reason
- **响应:** 取消结果

### 4. 错误码定义
- 通用错误码
- 业务错误码
- 支付相关错误码

## 技术实现要点

1. **保持一致性:** 遵循现有API文档的格式和结构
2. **完整性:** 覆盖所有页面功能需求
3. **安全性:** 确保支付流程的安全性
4. **用户体验:** 提供清晰的错误提示和状态反馈
5. **异常处理:** 处理网络异常、支付超时等情况

## 文档位置
- 文件路径: `d:\github\Yisu-Hotel-backend\docs\M-api-document5.md`