const express = require('express');
const router = express.Router();

// 帮助中心数据，与前端结构保持一致
const faqItems = [
  {
    id: 1,
    category: '账户与会员',
    questions: [
      {
        q: '如何注册会员账户？',
        a: '您可以通过以下方式注册会员账户：1. 在官网或APP首页点击"注册"按钮；2. 填写手机号码，获取并输入验证码；3. 设置登录密码；4. 点击"完成注册"按钮。注册成功后，您将自动成为我们的普通会员。'
      },
      {
        q: '忘记密码怎么办？',
        a: '如果您忘记了密码，可以按照以下步骤重置：1. 在登录页面点击"忘记密码"；2. 输入注册时使用的手机号码；3. 获取并输入验证码；4. 设置新的登录密码；5. 点击"确认重置"按钮。重置成功后，您可以使用新密码登录账户。'
      },
      {
        q: '会员积分规则是什么？',
        a: '我们的会员积分规则如下：1. 积分获取：每消费1元可获得1个积分，入住酒店、餐饮消费、购买礼品等均可累计积分；2. 积分使用：积分可用于抵扣房费、兑换礼品、升级会员等级等；3. 积分有效期：积分自获得之日起2年内有效，逾期未使用的积分将自动失效；4. 会员等级：根据积分累计情况，会员等级分为普通会员、银卡会员、金卡会员和钻石会员，不同等级享受不同的专属权益；5. 积分查询：您可以在官网、APP或通过客服热线查询您的积分余额和积分明细。'
      }
    ]
  },
  {
    id: 2,
    category: '预订与入住',
    questions: [
      {
        q: '如何预订酒店？',
        a: '您可以通过多种方式预订酒店：1. 官方网站：访问我们的官网，选择城市、日期和房型后直接预订；2. 手机APP：下载我们的APP，享受更多会员专享优惠；3. 客服热线：拨打我们的24小时客服热线，由客服人员为您办理预订。预订时需要提供入住日期、离店日期、入住人数等基本信息。'
      },
      {
        q: '酒店的入住时间和退房时间是几点？',
        a: '酒店的入住时间通常是14:00后，退房时间是12:00前。如果您有特殊需求，比如提前入住或延迟退房，可以联系前台协商，我们会尽力为您安排。'
      },
      {
        q: '如何取消预订？',
        a: '我们的取消政策因预订类型而异。通常情况下，提前24小时取消预订可以获得全额退款，部分特价房型可能会有不同的取消政策。建议您在预订时查看具体的取消政策，或者联系客服了解详情。'
      }
    ]
  },
  {
    id: 3,
    category: '酒店设施与服务',
    questions: [
      {
        q: '酒店提供哪些设施？',
        a: '我们的酒店通常提供以下设施和服务：免费WiFi、停车场、健身房、餐厅、24小时前台、行李寄存等。部分高端酒店还会提供游泳池、SPA、商务中心等额外设施。具体设施因酒店而异，您可以在酒店详情页查看完整信息。'
      },
      {
        q: '酒店有WiFi吗？',
        a: '是的，我们所有酒店都提供免费WiFi服务。您入住时可以向前台询问WiFi密码，或者在房间内的欢迎卡片上找到WiFi信息。如果您在使用过程中遇到问题，可以联系前台寻求帮助。'
      },
      {
        q: '酒店提供早餐吗？',
        a: '是的，我们大部分酒店都提供早餐服务。早餐时间通常是7:00-10:00，具体时间可能因酒店而异。早餐类型包括中式、西式或自助式，您可以在预订时查看酒店详情页了解具体的早餐信息。'
      }
    ]
  },
  {
    id: 4,
    category: '支付与退款',
    questions: [
      {
        q: '酒店接受哪些支付方式？',
        a: '是的，我们的酒店接受多种支付方式，包括信用卡（Visa、MasterCard、American Express等）、借记卡、移动支付（支付宝、微信支付等）以及现金支付。具体支付方式可能因酒店而异，建议您在预订时确认。'
      },
      {
        q: '退款需要多长时间到账？',
        a: '退款到账时间取决于您使用的支付方式：1. 支付宝/微信支付：通常1-3个工作日到账；2. 银行卡支付：通常3-7个工作日到账；3. 信用卡支付：通常7-15个工作日到账。如果超过预计时间仍未收到退款，请联系客服查询详情。'
      }
    ]
  },
  {
    id: 5,
    category: '其他问题',
    questions: [
      {
        q: '酒店允许携带宠物吗？',
        a: '关于携带宠物的政策因酒店而异。部分酒店允许携带小型宠物，可能会收取宠物清洁费；部分酒店不允许携带宠物。建议您在预订时查看酒店的宠物政策，或者提前联系酒店确认。'
      },
      {
        q: '酒店可以提供婴儿床吗？',
        a: '是的，大部分酒店都可以提供婴儿床服务，通常需要提前预订。婴儿床服务可能会收取少量费用，具体情况因酒店而异。建议您在预订时备注需要婴儿床，或者提前联系酒店确认。'
      },
      {
        q: '如何联系客服？',
        a: '您可以通过以下方式联系我们的客服：1. 客服热线：拨打我们的24小时客服热线400-123-4567；2. 在线客服：在官网或APP上点击"在线客服"，与客服人员实时沟通；3. 邮箱：发送邮件至service@yisuhotel.com，我们会在24小时内回复您；4. 社交媒体：关注我们的官方微信公众号、微博等，通过私信方式联系客服。'
      }
    ]
  }
];

/**
 * 获取帮助中心常见问题
 * @param {Object} req - Express请求对象
 * @param {Object} res - Express响应对象
 * @returns {Promise<Object>} - 帮助中心数据响应
 */
const getHelpCenter = async (req, res) => {
  try {
    return res.json({
      code: 0,
      msg: '请求成功',
      data: {
        faqItems
      }
    });
  } catch (error) {
    console.error('获取帮助中心数据失败:', error);
    return res.status(500).json({
      code: 500,
      msg: '服务器错误',
      data: null
    });
  }
};

// 路由配置
router.get('/center', getHelpCenter);

module.exports = router;
