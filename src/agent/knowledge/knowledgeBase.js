// 本地知识库，包含常见问题和回答

const knowledgeBase = [
  {
    id: '1',
    question: '酒店的入住时间是几点？',
    keywords: ['入住时间', '几点入住', '入住', '时间'],
    answer: '酒店的入住时间通常是14:00后，退房时间是12:00前。如果您有特殊需求，比如提前入住或延迟退房，可以联系前台协商，我们会尽力为您安排。'
  },
  {
    id: '2',
    question: '酒店有停车场吗？',
    keywords: ['停车场', '停车', '停车位', '停车费'],
    answer: '是的，我们酒店提供停车场服务。大部分酒店都有免费停车位，部分高端酒店可能会收取少量停车费。建议您在预订时确认具体的停车信息，以便做好安排。'
  },
  {
    id: '3',
    question: '如何预订酒店？',
    keywords: ['预订', '怎么订', '如何预订', '预订方式'],
    answer: '您可以通过多种方式预订酒店：1. 官方网站：访问我们的官网，选择城市、日期和房型后直接预订；2. 手机APP：下载我们的APP，享受更多会员专享优惠；3. 客服热线：拨打我们的24小时客服热线，由客服人员为您办理预订。预订时需要提供入住日期、离店日期、入住人数等基本信息。'
  },
  {
    id: '4',
    question: '酒店提供早餐吗？',
    keywords: ['早餐', '早饭', '早餐时间', '早餐类型'],
    answer: '是的，我们大部分酒店都提供早餐服务。早餐时间通常是7:00-10:00，具体时间可能因酒店而异。早餐类型包括中式、西式或自助式，您可以在预订时查看酒店详情页了解具体的早餐信息。'
  },
  {
    id: '5',
    question: '酒店有WiFi吗？',
    keywords: ['WiFi', 'wifi', '网络', '上网'],
    answer: '是的，我们所有酒店都提供免费WiFi服务。您入住时可以向前台询问WiFi密码，或者在房间内的欢迎卡片上找到WiFi信息。如果您在使用过程中遇到问题，可以联系前台寻求帮助。'
  },
  {
    id: '6',
    question: '如何取消预订？',
    keywords: ['取消', '退款', '取消预订', '退款政策'],
    answer: '我们的取消政策因预订类型而异。通常情况下，提前24小时取消预订可以获得全额退款，部分特价房型可能会有不同的取消政策。建议您在预订时查看具体的取消政策，或者联系客服了解详情。'
  },
  {
    id: '7',
    question: '酒店的价格是多少？',
    keywords: ['价格', '多少钱', '费用', '房价'],
    answer: '酒店价格因城市、季节、房型等因素而异。例如，一线城市的酒店价格通常比二三线城市高，旺季价格会比淡季高。您可以在我们的平台上搜索具体酒店查看实时价格，也可以告诉我您的需求，我来为您推荐符合预算的酒店。'
  },
  {
    id: '8',
    question: '酒店提供哪些设施？',
    keywords: ['设施', '服务', '有什么', '酒店设施'],
    answer: '我们的酒店通常提供以下设施和服务：免费WiFi、停车场、健身房、餐厅、24小时前台、行李寄存等。部分高端酒店还会提供游泳池、SPA、商务中心等额外设施。具体设施因酒店而异，您可以在酒店详情页查看完整信息。'
  },
  {
    id: '9',
    question: '酒店可以延迟退房吗？',
    keywords: ['延迟退房', '退房时间', '晚退房', '退房'],
    answer: '酒店的退房时间通常是12:00前。如果您需要延迟退房，可以联系前台协商，部分酒店会根据房态情况免费为您延迟，部分酒店可能会收取少量延迟退房费用。'
  },
  {
    id: '10',
    question: '酒店可以提前入住吗？',
    keywords: ['提前入住', '早入住', '入住时间', '入住'],
    answer: '酒店的入住时间通常是14:00后。如果您需要提前入住，可以联系前台协商，部分酒店会根据房态情况免费为您安排，部分酒店可能会收取少量提前入住费用。'
  },
  {
    id: '11',
    question: '酒店接受信用卡支付吗？',
    keywords: ['支付', '信用卡', '支付方式', '付款'],
    answer: '是的，我们的酒店接受多种支付方式，包括信用卡（Visa、MasterCard、American Express等）、借记卡、移动支付（支付宝、微信支付等）以及现金支付。具体支付方式可能因酒店而异，建议您在预订时确认。'
  },
  {
    id: '12',
    question: '酒店可以提供婴儿床吗？',
    keywords: ['婴儿床', '儿童床', '宝宝床', '婴儿设施'],
    answer: '是的，大部分酒店都可以提供婴儿床服务，通常需要提前预订。婴儿床服务可能会收取少量费用，具体情况因酒店而异。建议您在预订时备注需要婴儿床，或者提前联系酒店确认。'
  },
  {
    id: '13',
    question: '酒店允许携带宠物吗？',
    keywords: ['宠物', '带宠物', '宠物政策', '动物'],
    answer: '关于携带宠物的政策因酒店而异。部分酒店允许携带小型宠物，可能会收取宠物清洁费；部分酒店不允许携带宠物。建议您在预订时查看酒店的宠物政策，或者提前联系酒店确认。'
  },
  {
    id: '14',
    question: '酒店有会议室吗？',
    keywords: ['会议室', '会议', '商务会议', '会议设施'],
    answer: '是的，大部分商务酒店和高端酒店都有会议室设施，可用于商务会议、研讨会等活动。会议室的大小和设施因酒店而异，通常需要提前预订。建议您联系酒店销售部了解具体的会议室信息和价格。'
  },
  {
    id: '15',
    question: '酒店的地址在哪里？',
    keywords: ['地址', '位置', '在哪里', '酒店地址'],
    answer: '我们在全国各地都有酒店，具体地址取决于您选择的酒店。您可以在我们的官网或APP上搜索具体酒店，查看详细地址和交通信息。如果您需要帮助，可以告诉我您想了解的酒店名称，我来为您查询具体地址。'
  },
  {
    id: '16',
    question: '会员积分规则是什么？',
    keywords: ['会员积分', '积分规则', '积分', '会员', '积分获取', '积分使用', '积分有效期'],
    answer: '我们的会员积分规则如下：1. 积分获取：每消费1元可获得1个积分，入住酒店、餐饮消费、购买礼品等均可累计积分；2. 积分使用：积分可用于抵扣房费、兑换礼品、升级会员等级等；3. 积分有效期：积分自获得之日起2年内有效，逾期未使用的积分将自动失效；4. 会员等级：根据积分累计情况，会员等级分为普通会员、银卡会员、金卡会员和钻石会员，不同等级享受不同的专属权益；5. 积分查询：您可以在官网、APP或通过客服热线查询您的积分余额和积分明细。'
  }
];

// 搜索知识库
function searchKnowledgeBase(query, threshold = 0.3) {
  const queryLower = query.toLowerCase();
  const results = [];

  for (const item of knowledgeBase) {
    // 计算匹配度
    let score = 0;
    
    // 检查问题是否包含查询词
    if (item.question.toLowerCase().includes(queryLower)) {
      score += 0.5;
    }
    
    // 检查关键词是否匹配
    for (const keyword of item.keywords) {
      if (queryLower.includes(keyword.toLowerCase())) {
        score += 0.1;
      }
    }
    
    // 检查答案是否包含查询词
    if (item.answer.toLowerCase().includes(queryLower)) {
      score += 0.2;
    }
    
    if (score >= threshold) {
      results.push({
        ...item,
        score
      });
    }
  }
  
  // 按匹配度排序
  results.sort((a, b) => b.score - a.score);
  
  return results;
}

module.exports = {
  knowledgeBase,
  searchKnowledgeBase
};
